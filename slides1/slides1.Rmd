---
title: "R Workshop 2024"
subtitle: "<i>BMC YMH Team</i>"  
author: 
  - "Timothy Wong"
date: 'Spring 2024'
output:
  xaringan::moon_reader:
    css: ["xaringan-themer.css", "custom.css"]
    nature:
      slideNumberFormat: "%current%"
      highlightStyle: tomorrow-night-bright
      highlightLines: true
      countIncrementalSlides: false
---

```{r setup, include=FALSE}
options(htmltools.dir.version = FALSE)
knitr::opts_chunk$set(
  fig.width=9, fig.height=3.5, fig.retina=3,
  out.width = "100%",
  cache = FALSE,
  echo = TRUE,
  message = FALSE, 
  warning = FALSE,
  hiline = TRUE
)
```

```{r xaringan-themer, include=FALSE, warning=FALSE}
library(xaringanthemer)
blue <- "#1381B0"
orange <- "#FF961C"
white <- "#FFFFFF"


style_duo_accent(
  primary_color = blue,
  secondary_color = orange,
  inverse_header_color = white,
  text_bold_color = orange,
  
  # Custom
  title_slide_background_color = white,
  title_slide_text_color = blue
)
```

name: housekeeping

## Housekeeping

1. Did you bring a laptop (Mac or Windows)?

2. Have you downloaded R and RStudio?

3. Have you downloaded XCode (Mac) or Rtools (Windows)?

If are stuck on Step 2 or 3, **please let us know now**
---
name: colors

## Overview

1. What is R?

2. The RStudio interface

3. Objects

4. Working with external data

5. Data manipulation with `tidyverse`

---
class: inverse center middle

# What is R?

---
name: what R
## What is R?

.col-flex-container[
  .column[
  ### Statistical
  ANOVA, regression, t.tests
  
  Plots, graphs
  
  Data tables
]
  
  .column[
  ### Programming
  
  To give instructions to a computer
]

  .column[
  ### Language
  The means by which we talk to the computer
  * Syntax/"grammar"
  
  * Meaning
]
]
---

name: why R

## Why use R?

.pull-left[
### Pros

* Free

* Open-source

* Huge library of **packages** that extend R's functionality

* Huge community of experts

* Is a *language*

]

.pull-right[
### Cons

* Can be difficult to pick up

* Curse of freedom
]

--
<br>

**Thesis**: The pros of learning R outweight the cons


---
class: inverse center middle

# The RStudio interface


---
name: rstudio info

## Navigating RStudio

RStudio is an **integrated development environment** for R. It is separate to R and makes life easier than just working with R.

---
![rgui](https://tim9800.github.io/r_workshop_2024/img/rgui.png)
---
![rcmd](https://tim9800.github.io/r_workshop_2024/img/rcmd.png)
---

![rstudio](https://tim9800.github.io/r_workshop_2024/img/rstudio.png)
---
template: rstudio info

* Top left: **Text editor** and data tabs

* Top right: **Environment**, displays a list of R objects

* Bottom left: **Console**, runs R code

* Bottom right: Files, plots, packages, **help**, viewer

---
name: basicf
## Basic functionality


Let's open our first R script and play around with the console. On the top left of the screen, navigate to `File > New File > R Script`

---
template: basicf
```{r calculator1, eval = FALSE}
> 1 + 1
```

---
template: basicf
```{r calculator2, eval = FALSE}
> 1 + 1
[1] 2
```

R can be used as a calculator

--

```{r autocomplete, eval = FALSE}
> read.
... (press tab twice!)
```

--

R can autocomplete commands

--

```{r help, eval = FALSE}
> ?read.csv()
```

--

R can give you help on unfamiliar commands

---
class: inverse center middle

# Objects

---
## What is an object?
In R we care about objects and their transformations

> *Everything that exists in R is an object.* <br>
> *Everything that happens in R is a function call.* <br>
> **John Chambers**

R stores everything as objects

Objects

* Belong to **classes**

* Are **structured**

* Have **names**<sup>1</sup>

--

.footnote[[1] Not completely true. Hadley Wickham insists that names have objects<sup>[1](https://x.com/hadleywickham/status/732288980549390336?lang=en), [2](https://adv-r.hadley.nz/names-values.html#binding-basics)</sup>. To avoid this discussion, I will say that a name *refers to* or *references* an object.]

---
## Making and calling objects

To make an object, you must first come up with a valid name:

* Starts with a letter [A-Za-z]
* NOT starting with a number [0-9] or special character [._]

```{r, eval = FALSE}
my_object
.bad_name
1another_bad_name
```

Next, bind an object to the name using the `<-` operator

```{r}
my_object <- 123
```

To retrieve the object, we **call** the object by typing its name

```{r}
my_object
```


---
## Using objects

We just saw that an object's **name** can be used to access the information inside the object it refers to
* Like pronumerals in maths, $x = 123$

```{r, eval = FALSE}
my_object + 1
sqrt(my_object)
my_object + my_object
```

--

What is the value of `my_object`?

--

```{r}
my_object
```

---
## Save your operations!
> *Everything that exists in R is an object.* <br>
>
> Objects have **names**

`my_object + 1` is not an object, because we haven't assigned it a name

--

```{r}
new_object <- my_object + 1
new_object
```

--

Note that you can use the same name to store the result of `my_object + 1`. Try it!

```{r}
my_object <- my_object + 1
my_object
```

---
## Object classes
> *Everything that exists in R is an object.* <br>
>
> Objects belong to **classes**

There are six *atomic* classes in R

.pull-left[
Here are the four common classes:
<br>
<br>
* `numeric`: the real numbers

* `integer`: the integers

* `character`: 'textual' information

* `logical`: `TRUE`, `FALSE` and `NA`
]

.pull-right[
And here's how to make objects of each class:

```{r}
num <- 123

int <- 123L

char <- "123" # Use double quotes to create character objects

logi <- TRUE
```
]
---
## `class()`

The `class()` function returns the class of the object you use it on

```{r}
class(num)
class(int)
class(char)
class(logi)
```


---
## Vectors
> *Everything that exists in R is an object.* <br>
>
> Objects are **structured**

Vectors are:
* A kind of data structure
* A **homogenous** collection of elements (i.e. all the elements belong to the
same class)

--

Create vectors using the function `c()`, short for "combines", on the elements
you want to put into the vector

```{r}
survey_age <- c(15, 25, 27, 18) # A numeric vector

survey_gender <- c("Male", "Female", "Female", "Male") # A character vector
```

---
## Factors

Factors are a kind of vector well-suited to storing **categorical data**.

Create factors by using `factor()` on character vectors:

```{r}
gender_factor <- factor(survey_gender)
gender_factor
```


---
## Functions
> *Everything that happens in R is a function call*

Functions

* Are objects, meaning they have **names**

* Are bundles of instructions that take an input and return an output

---

## Structure of a function

The inputs we give to a function are called **arguments**. Arguments change
the behaviour of the function, depending on the argument's value.

What kind of arguments does a function expect? Use `?` to find out

```{r}
?sqrt

```

Arguments can be named
```{r}
sqrt(x = 4)
```

or positional
```{r}
sqrt(4)
```


---

class: inverse center middle

# Working with external data

---
## Put everything in one place
> Clean up your room! <br>
> *Jordan B. Peterson*

Having all your files, R scripts, and spreadsheets in one **directory** (folder)
makes it easy to work with external data.

Exercise:

1. Minimise RStudio and find a place on your computer to save the script you've
been working on

2. Make a folder there

3. Go back to RStudio, and `File > Save As.. > [Location you chose]`

4. Save the [workshop dataset]() into the same folder

---
## The working directory

The **working directory** is the folder where R saves and looks for files.

What is your current working directory?

```{r, eval = FALSE}
getwd() # Probably not where you want
```

How do we set our working directory to the folder we want?
<br>

--

&emsp; Option 1: `Session > Set Working Directory > Choose Directory ...`

--

&emsp; Option 2: Close R Studio, and double click on the .R Script you just saved,
in the folder you saved it in

--

&emsp; Option 3 (slow): 

```{r, eval = FALSE}
setwd("C:/Location/to/your/file.R")
```

---
## Reading in `.csv` files

Data about people (surveys, clinical data) is often stored in `.csv` files

> *Everything that exists in R is an object*

`read.csv()` is a function which converts a `.csv` file into an R object - specifically,
a **data frame**.

```{r}
# survey_df <- read.csv("workshop_data.csv")
```


---
## Saving and loading R objects


---
class: inverse middle center tidyverse-title

# Data manipulation with

---
<img src="https://tim9800.github.io/r_workshop_2024/img/tidyverse_logo.png" class="embed-right-icon">
## What is tidyverse?



The tidyverse is a set of **packages** for R that "share an underlying design philosophy, grammar, and data structures" of tidy data.<sup>[3](https://www.tidyverse.org/)</sup>


<img src="https://tim9800.github.io/r_workshop_2024/img/hadley.jpg" class = "embed-right-small">

* Developed in principal by Hadley Wickham <sup>[4](https://en.wikipedia.org/wiki/Hadley_Wickham)</sup>

    * R for Data Science
    * Advanced R
    
---
## Installing tidyverse

As tidyverse is an external package, we must install it before we can use it.

To install packages, we use the function `install.packages()` on tidyverse (quoted)

```{r, eval = FALSE}
install.packages("tidyverse") # Try autocomplete!
```

After installing a package, we must attach it to R to use its features. This is
by calling the `library()` function on tidyverse (no quotes)

```{r}
library(tidyverse) # Autocomplete to the rescue
```

**Notes**
* `install.packages("package")` is used once
* `library(package)` is used *every time you open R*
* Repeat this process for each package you want to use

---
## Maybe a slide on tidyverse vs base R

---
## `%>%`: pipes

---
## `select()`: column-wise subsetting

---
## `filter()`: row-wise subsetting

---
## `mutate()`: make new columns

---



